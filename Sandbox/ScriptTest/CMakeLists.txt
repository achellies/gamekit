
if (APPLE)
include_directories(${OGRELITE_SOURCE_DIR}/OgreMain/include/OSX)
        SET(EXETYPE MACOSX_BUNDLE)
        SET_SOURCE_FILES_PROPERTIES( MainMenu.nib  PROPERTIES MACOSX_PACKAGE_LOCATION Resources )
 	SET_SOURCE_FILES_PROPERTIES(momo_ogreSmallAnim.blend PROPERTIES MACOSX_PACKAGE_LOCATION Resources )
	SET (NibFile MainMenu.nib)
endif()

# ---------------------------------------------------------
set(SCRIPT_ROOT ${CMAKE_SOURCE_DIR}/Tests/ScriptTest)
set(LUA_INCLUDE ${SCRIPT_ROOT}/Lua/lua)

subdirs(Lua)

# ---------------------------------------------------------

set(GKS_SRC
	LuaApp.cpp
	LuaEngine.cpp
	LuaBindingUtils.cpp
	Modules/LuaSystem.cpp
	Modules/LuabParse.cpp
	Modules/LuaGameKit.cpp
	Modules/LuaKeyCodes.cpp
	Modules/TempData.cpp
)


set(GKS_HDR
	LuaCommon.h
	LuaEngine.h
	LuaInclude.h
	LuaType.h
	LuaBindingUtils.h
)

# ---------------------------------------------------------
set(GKS_LUA_SCRIPTS 
	include.lua
	test.lua
	debug.lua
)
source_group(Scripts\\Lua FILES ${GKS_LUA_SCRIPTS})


include_directories(
	${SCRIPT_ROOT} 
	${LUA_INCLUDE} 
	${OGREKIT_OGRE_INCLUDE}
	${OGREKIT_SOURCE_DIR}/Core/Engine
	${GAMEKIT_SERIALIZE_COMMON}
	${GAMEKIT_SERIALIZE_BLENDER}
	${GAMEKIT_SERIALIZE_BLENDER}/autogenerated
	${OGREKIT_BULLET_INCLUDE}
	)


link_libraries(Lua
    OgreKitCore 
    ${OGREKIT_OGRE_LIBS}
    ${OGREKIT_BULLET_LIBS}
	${GAMEKIT_SERIALIZE_COMMON_TARGET}
	${GAMEKIT_SERIALIZE_BLENDER_TARGET}
)

if (WIN32)
	if (CMAKE_COMPILER_IS_GNUCXX)
		# FreeImage LibRawLite dependency 
		link_libraries(ws2_32)
	endif (CMAKE_COMPILER_IS_GNUCXX)
endif(WIN32)


if (APPLE)
        add_executable(
        ScriptTest
        MACOSX_BUNDLE
        MainMenu.nib
	${GKS_SRC} 
        ${GKS_HDR} 
        ${GKS_LUA_SCRIPTS}
)
else ()
add_executable(ScriptTest 
	${GKS_SRC} 
	${GKS_HDR} 
	${GKS_LUA_SCRIPTS}
	)
endif()

#install(TARGETS ScriptTest RUNTIME DESTINATION ${OGREKIT_INSTALL_PREFIX})
